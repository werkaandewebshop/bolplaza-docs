<!DOCTYPE html>
<!--[if lt IE 7]>       <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>          <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>          <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <title>Orders - Bol.com Plaza API Connector</title>
    <meta name="description" content="Verbind Prestashop met Bol.com om orders en producten te synchroniseren." />
    <meta name="author" content="Mark Wienk">
    <meta charset="UTF-8">
    <link rel="icon" href="../themes/daux/img/favicon-blue.png" type="image/x-icon">
    <!-- Mobile -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Font -->
    <link href='//fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700&subset=latin,cyrillic-ext,cyrillic' rel='stylesheet' type='text/css'>
    <!-- CSS -->
    <link href='../themes/daux/css/theme.min.css' rel='stylesheet' type='text/css'><link href='../themes/daux/css/theme-blue.min.css' rel='stylesheet' type='text/css'>
    
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body class="with-float">
    
<div class="container-fluid fluid-height wrapper">
    <div class="navbar navbar-static-top hidden-print">
        <div class="container-fluid">
            <a class="brand navbar-brand pull-left" href="../index.html">Bol.com Plaza API Connector</a>

        </div>
    </div>
    <div class="row columns content">
        <div class="left-column article-tree col-sm-3 hidden-print">
            <!-- For Mobile -->
            <div class="responsive-collapse">
                <button type="button" class="btn btn-sidebar" id="menu-spinner-button">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div id="sub-nav-collapse" class="sub-nav-collapse">
                <!-- Navigation -->
                <ul class='nav nav-list'><li class=''><a href="../Getting_Started.html">Getting Started</a></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Configuratie</a><ul class='nav nav-list'><li class=''><a href="../Configuratie/Bol.com.html">Bol.com</a></li><li class=''><a href="../Configuratie/Module.html">Module</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Tests</a><ul class='nav nav-list'><li class=''><a href="../Tests/Orders.html">Orders</a></li><li class=''><a href="../Tests/Producten.html">Producten</a></li></ul></li><li class='open has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Gebruik</a><ul class='nav nav-list'><li class='active'><a href="../Gebruik/Orders.html">Orders</a></li><li class=''><a href="../Gebruik/Producten.html">Producten</a></li></ul></li></ul>

                <div class="sidebar-links">
                    
                        <!-- Links -->
                        <a href="http://addons.prestashop.com/en/22376-bolcom-plaza-api-connector.html" target="_blank">Aanschaffen</a><br><a href="https://addons.prestashop.com/en/customer-products.php" target="_blank">Download</a><br><a href="https://addons.prestashop.com/en/customer-support.php" target="_blank">Support/Bugs</a><br>
                        <div id="toggleCodeBlock">
                                                </div>

                        <!-- Twitter -->
                                                    <div class="twitter">
                                <hr/>
                                <iframe allowtransparency="true" frameborder="0" scrolling="no" style="width:162px; height:20px;" src="https://platform.twitter.com/widgets/follow_button.html?screen_name=mwienk&amp;show_count=false"></iframe>
                            </div>
                        
                        <hr/>
                    
                </div>
            </div>
        </div>
        <div class="right-column float-view content-area col-sm-9">

            <div class="content-page">
                
                <div class="doc_content">
                    <article>
            <div class="page-header sub-header clearfix">
            <h1><a href="../Gebruik/Orders.html">Gebruik</a> <i class="glyphicon glyphicon-chevron-right"></i> <a href="../Gebruik/Orders.html">Orders</a></h1>
            <span style="float: left; font-size: 10px; color: gray;">
                Wednesday, June 22, 2016            </span>
            <span style="float: right; font-size: 10px; color: gray;">
                2:01 PM            </span>
        </div>
    
    <h3 id="page_Inhoud">Inhoud</h3>
<ul class="TableOfContents">
<li>
<p><a href="#page_Inhoud">Inhoud</a></p>
</li>
<li>
<p><a href="#page_Bolcom_orders_in_Prestashop">Bol.com orders in Prestashop</a></p>
<ul class="TableOfContents">
<li>
<p><a href="#page_Orders_overview">Orders overview</a></p>
</li>
<li>
<p><a href="#page_Prestashop_orderscherm">Prestashop orderscherm</a></p>
</li>
</ul>
</li>
<li>
<p><a href="#page_Mogelijke_fouten">Mogelijke fouten</a></p>
<ul class="TableOfContents">
<li>
<p><a href="#page_Kan_geen_product_vinden">Kan geen product vinden</a></p>
</li>
<li>
<p><a href="#page_Waarschuwing_bij_importeren_van_meerdere_orders">Waarschuwing bij importeren van meerdere orders</a></p>
</li>
<li>
<p><a href="#page_Ik_kan_geen_producten_importeren_die_niet_op_voorraad_zijn">Ik kan geen producten importeren die niet op voorraad zijn</a></p>
</li>
</ul>
</li>
</ul>
<h2 id="page_Bolcom_orders_in_Prestashop">Bol.com orders in Prestashop</h2>
<p>Na het installeren van de module zijn er nieuwe opties in het menu van Prestashop gekomen. Een daarvan is <code>Bestellingen</code> -&gt; <code>Bol.com orders</code>. Wanneer u daar naartoe navigeert, ziet u een overzicht van alle Bol.com bestellingen in het systeem.</p>
<p><img src="overview_orders.png" alt="Bol.com orders" /></p>
<h3 id="page_Orders_overview">Orders overview</h3>
<p>Navigeer naar <code>Bestellingen</code> -&gt; <code>Bol.com orders</code>. Als het goed is ziet u bovenin de knop <code>Synchroniseer bestellingen</code>.</p>
<p>Met deze knop worden de bestellingen van Bol.com opgehaald en in uw systeem gezet. U kunt de bestelling vervolgens afhandelen via uw interne orderverwerkingsproces. U kunt op de order klikken om naar het Prestashop orderscherm te navigeren.</p>
<h3 id="page_Prestashop_orderscherm">Prestashop orderscherm</h3>
<p>In het Prestashop orderscherm kunt u de Bol.com orderreferentie vinden in het paneel  <code>Betaling</code>.</p>
<p><img src="overview_order_reference.png" alt="Orderreferentie" /></p>
<p>U kunt in dit scherm een trackingnummer aan de order toevoegen, dit nummer zal naar Bol.com gemeld worden. Nadat het trackingnummer is gemeld, is de order in Bol.com gemarkeerd als verwerkt.</p>
<h2 id="page_Mogelijke_fouten">Mogelijke fouten</h2>
<p>Bij het synchroniseren is het mogelijk dat er een fout wordt gegeven. Hier vindt u een overzicht.</p>
<h3 id="page_Kan_geen_product_vinden">Kan geen product vinden</h3>
<p><img src="error_no_code.png" alt="Product niet bekend" /></p>
<p>De foutmelding <code>Kan geen product vinden met EAN:XXXXX</code> wordt veroorzaakt doordat er geen product is met het EAN nummer dat door Bol.com is teruggemeld. Maak een product aan met dit nummer en synchroniseer de orders opnieuw. De overige fouten (<code>Kan geen winkelwagen aanmakenXXX</code>) worden veroorzaakt door de eerste fout.</p>
<h3 id="page_Waarschuwing_bij_importeren_van_meerdere_orders">Waarschuwing bij importeren van meerdere orders</h3>
<p>De waarschuwing komt door een bug in Prestashop core, het probleem kan geen kwaad, maar er is een <a href="http://forge.prestashop.com/browse/PSCSX-7858">bug report</a> gemaakt. U kunt de waarschuwing verwijderen door handmatig een override class te maken voor de Cart class (zie code block hiernaast/onder).</p>
<pre><code>/**
 * Get the delivery option selected, or if no delivery option was selected,
 * the cheapest option for each address
 *
 * @param Country|null $default_country
 * @param bool         $dontAutoSelectOptions
 * @param bool         $use_cache
 *
 * @return array|bool|mixed Delivery option
 */
public function getDeliveryOption($default_country = null, $dontAutoSelectOptions = false, $use_cache = true)
{
    static $cache = array();
    $cache_id = (int)(is_object($default_country) ? $default_country-&gt;id : 0).'-'.(int)$dontAutoSelectOptions.'-'.$this-&gt;id;
    if (isset($cache[$cache_id]) &amp;&amp; $use_cache) {
        return $cache[$cache_id];
    }

    $delivery_option_list = $this-&gt;getDeliveryOptionList($default_country);

    // The delivery option was selected
    if (isset($this-&gt;delivery_option) &amp;&amp; $this-&gt;delivery_option != '') {
        $delivery_option = Tools::unSerialize($this-&gt;delivery_option);
        $validated = true;
        foreach ($delivery_option as $id_address =&gt; $key) {
            if (!isset($delivery_option_list[$id_address][$key])) {
                $validated = false;
                break;
            }
        }

        if ($validated) {
            $cache[$cache_id] = $delivery_option;
            return $delivery_option;
        }
    }

    if ($dontAutoSelectOptions) {
        return false;
    }

    // No delivery option selected or delivery option selected is not valid, get the better for all options
    $delivery_option = array();
    foreach ($delivery_option_list as $id_address =&gt; $options) {
        foreach ($options as $key =&gt; $option) {
            if (Configuration::get('PS_CARRIER_DEFAULT') == -1 &amp;&amp; $option['is_best_price']) {
                $delivery_option[$id_address] = $key;
                break;
            } elseif (Configuration::get('PS_CARRIER_DEFAULT') == -2 &amp;&amp; $option['is_best_grade']) {
                $delivery_option[$id_address] = $key;
                break;
            } elseif ($option['unique_carrier'] &amp;&amp; in_array(Configuration::get('PS_CARRIER_DEFAULT'), array_keys($option['carrier_list']))) {
                $delivery_option[$id_address] = $key;
                break;
            }
        }

        reset($options);
        if (!isset($delivery_option[$id_address])) {
            $delivery_option[$id_address] = key($options);
        }
    }

    $cache[$cache_id] = $delivery_option;

    return $delivery_option;
}
</code></pre>
<h3 id="page_Ik_kan_geen_producten_importeren_die_niet_op_voorraad_zijn">Ik kan geen producten importeren die niet op voorraad zijn</h3>
<p>Dit kan wel, maar dan moeten de producten wel bestelbaar zijn (dus ook op uw website). U kunt deze functionaliteit veranderen door een override class aan te maken voor Product, en daarin de volgende code te zetten (zie hiernaast/onder)</p>
<pre><code>public static function isAvailableWhenOutOfStock($out_of_stock)
{
    // @TODO 1.5.0 Update of STOCK_MANAGEMENT &amp; ORDER_OUT_OF_STOCK
    static $ps_stock_management = null;
    if ($ps_stock_management === null) {
        $ps_stock_management = Configuration::get('PS_STOCK_MANAGEMENT');
    }

    if (!$ps_stock_management || isset(Context::getContext()-&gt;employee)) {
        return true;
    } else {
        static $ps_order_out_of_stock = null;
        if ($ps_order_out_of_stock === null) {
            $ps_order_out_of_stock = Configuration::get('PS_ORDER_OUT_OF_STOCK');
        }

        return (int)$out_of_stock == 2 ? (int)$ps_order_out_of_stock : (int)$out_of_stock;
    }
}
</code></pre>

        <nav>
        <ul class="pager">
            <li><a href="../Tests/Producten.html">Previous</a></li>            <li><a href="../Gebruik/Producten.html">Next</a></li>        </ul>
    </nav>
    </article>

                </div>
            </div>
        </div>
    </div>
</div>

    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-36118513-3', '');
    ga('send', 'pageview');
</script>

    <!-- jQuery -->
    <script src="../themes/daux/js/jquery-1.11.3.min.js"></script>

    <!-- hightlight.js -->
    <script src="../themes/daux/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- JS -->
    
    <script src="../themes/daux/js/daux.js"></script>

    
</body>
</html>
